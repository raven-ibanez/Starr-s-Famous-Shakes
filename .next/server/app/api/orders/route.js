/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "(ssr)/./node_modules/@supabase/realtime-js/dist/main sync recursive":
/*!************************************************************!*\
  !*** ./node_modules/@supabase/realtime-js/dist/main/ sync ***!
  \************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(ssr)/./node_modules/@supabase/realtime-js/dist/main sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_codemedavid_Documents_starrs_Starr_s_Famous_Shakes_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/orders/route.ts */ \"(rsc)/./app/api/orders/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    resolvedPagePath: \"/Users/codemedavid/Documents/starrs/Starr-s-Famous-Shakes/app/api/orders/route.ts\",\n    nextConfigOutput,\n    userland: _Users_codemedavid_Documents_starrs_Starr_s_Famous_Shakes_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmNvZGVtZWRhdmlkJTJGRG9jdW1lbnRzJTJGc3RhcnJzJTJGU3RhcnItcy1GYW1vdXMtU2hha2VzJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmNvZGVtZWRhdmlkJTJGRG9jdW1lbnRzJTJGc3RhcnJzJTJGU3RhcnItcy1GYW1vdXMtU2hha2VzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ3NEO0FBQ3ZDO0FBQytDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ2lKOztBQUVqSiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0YXJycy1mYW1vdXMtc2hha2VzLz9lOTljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIm5leHQvZGlzdC9zZXJ2ZXIvbm9kZS1wb2x5ZmlsbC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvY29kZW1lZGF2aWQvRG9jdW1lbnRzL3N0YXJycy9TdGFyci1zLUZhbW91cy1TaGFrZXMvYXBwL2FwaS9vcmRlcnMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL29yZGVycy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL29yZGVyc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvb3JkZXJzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2NvZGVtZWRhdmlkL0RvY3VtZW50cy9zdGFycnMvU3RhcnItcy1GYW1vdXMtU2hha2VzL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29yZGVycy9yb3V0ZVwiO1xuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/orders/route.ts":
/*!*********************************!*\
  !*** ./app/api/orders/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/lib/supabase-server */ \"(rsc)/./src/lib/supabase-server.ts\");\n\n\nconst runtime = \"nodejs\";\n/**\n * GET /api/orders\n * Fetch orders with optional filters\n */ async function GET(request) {\n    try {\n        const searchParams = request.nextUrl.searchParams;\n        // Parse filters from query parameters\n        const filters = {};\n        const status = searchParams.get(\"status\");\n        const serviceType = searchParams.get(\"service_type\");\n        const dateFrom = searchParams.get(\"date_from\");\n        const dateTo = searchParams.get(\"date_to\");\n        const search = searchParams.get(\"search\");\n        if (status) filters.status = status;\n        if (serviceType) filters.service_type = serviceType;\n        if (dateFrom) filters.date_from = dateFrom;\n        if (dateTo) filters.date_to = dateTo;\n        if (search) filters.search = search;\n        // Build query\n        let query = _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.supabaseServer.from(\"orders\").select(`\n        *,\n        order_items (*)\n      `).order(\"created_at\", {\n            ascending: false\n        });\n        // Apply filters\n        if (filters.status) {\n            query = query.eq(\"status\", filters.status);\n        }\n        if (filters.service_type) {\n            query = query.eq(\"service_type\", filters.service_type);\n        }\n        if (filters.date_from) {\n            query = query.gte(\"created_at\", filters.date_from);\n        }\n        if (filters.date_to) {\n            query = query.lte(\"created_at\", filters.date_to);\n        }\n        if (filters.search) {\n            const searchTerm = filters.search.toLowerCase();\n            query = query.or(`order_number.ilike.%${searchTerm}%,customer_name.ilike.%${searchTerm}%,contact_number.ilike.%${searchTerm}%`);\n        }\n        const { data, error } = await query;\n        if (error) {\n            console.error(\"Error fetching orders:\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to fetch orders\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Format orders\n        const orders = (data || []).map((order)=>({\n                id: order.id,\n                order_number: order.order_number,\n                customer_name: order.customer_name,\n                contact_number: order.contact_number,\n                service_type: order.service_type,\n                address: order.address,\n                landmark: order.landmark,\n                pickup_time: order.pickup_time,\n                party_size: order.party_size,\n                dine_in_time: order.dine_in_time,\n                payment_method: order.payment_method,\n                reference_number: order.reference_number,\n                status: order.status,\n                total: Number(order.total),\n                notes: order.notes,\n                customer_ip: order.customer_ip,\n                created_at: order.created_at,\n                updated_at: order.updated_at,\n                completed_at: order.completed_at,\n                delivery_fee: order.delivery_fee ? Number(order.delivery_fee) : null,\n                lalamove_quotation_id: order.lalamove_quotation_id,\n                lalamove_order_id: order.lalamove_order_id,\n                lalamove_status: order.lalamove_status,\n                lalamove_tracking_url: order.lalamove_tracking_url,\n                order_items: order.order_items?.map((item)=>({\n                        id: item.id,\n                        order_id: item.order_id,\n                        menu_item_id: item.menu_item_id,\n                        menu_item_name: item.menu_item_name,\n                        quantity: item.quantity,\n                        unit_price: Number(item.unit_price),\n                        total_price: Number(item.total_price),\n                        selected_variation: item.selected_variation,\n                        selected_add_ons: item.selected_add_ons,\n                        created_at: item.created_at\n                    })) || [],\n                branch_id: order.branch_id\n            }));\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            orders\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Unexpected error in GET /api/orders:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * POST /api/orders\n * Create a new order\n */ async function POST(request) {\n    try {\n        const body = await request.json();\n        const clientIP = (0,_src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getClientIP)(request);\n        // Validate required fields\n        const { cartItems, customerName, contactNumber, serviceType, paymentMethod, total, options } = body;\n        if (!cartItems || !Array.isArray(cartItems) || cartItems.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Cart items are required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!customerName || !contactNumber || !serviceType || !paymentMethod || total === undefined) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Rate limiting disabled - allow all orders\n        // Generate order number\n        const { data: orderNumber, error: orderNumberError } = await _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.supabaseServer.rpc(\"generate_order_number\");\n        if (orderNumberError || !orderNumber) {\n            console.error(\"Error generating order number:\", orderNumberError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to generate order number\"\n            }, {\n                status: 500\n            });\n        }\n        // Create order\n        const { data: order, error: orderError } = await _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.supabaseServer.from(\"orders\").insert({\n            order_number: orderNumber,\n            customer_name: customerName,\n            contact_number: contactNumber,\n            service_type: serviceType,\n            address: options?.address || null,\n            landmark: options?.landmark || null,\n            pickup_time: options?.pickupTime || null,\n            party_size: options?.partySize || null,\n            dine_in_time: options?.dineInTime || null,\n            payment_method: paymentMethod,\n            reference_number: options?.referenceNumber || null,\n            status: \"pending\",\n            total: total,\n            delivery_fee: options?.deliveryFee ?? null,\n            lalamove_quotation_id: options?.lalamoveQuotationId || null,\n            lalamove_order_id: null,\n            lalamove_status: null,\n            lalamove_tracking_url: null,\n            notes: options?.notes || null,\n            customer_ip: clientIP,\n            branch_id: options?.branchId || null\n        }).select().single();\n        if (orderError || !order) {\n            console.error(\"Error creating order:\", orderError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to create order\",\n                details: orderError?.message || \"Order creation failed\"\n            }, {\n                status: 500\n            });\n        }\n        // Create order items\n        const orderData = order;\n        const orderItems = cartItems.map((item)=>{\n            // Extract menu item ID from cart item ID\n            let menuItemId = null;\n            if (item.id) {\n                const uuidMatch = item.id.match(/^([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/i);\n                if (uuidMatch && uuidMatch[1]) {\n                    menuItemId = uuidMatch[1];\n                }\n            }\n            return {\n                order_id: orderData.id,\n                menu_item_id: menuItemId,\n                menu_item_name: item.name,\n                quantity: item.quantity,\n                unit_price: item.totalPrice,\n                total_price: item.totalPrice * item.quantity,\n                selected_variation: item.selectedVariation || null,\n                selected_add_ons: item.selectedAddOns || null\n            };\n        });\n        const { error: itemsError } = await _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.supabaseServer.from(\"order_items\").insert(orderItems);\n        if (itemsError) {\n            console.error(\"Error creating order items:\", itemsError);\n            // Try to delete the order if items fail\n            await _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.supabaseServer.from(\"orders\").delete().eq(\"id\", orderData.id);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to create order items\",\n                details: itemsError.message\n            }, {\n                status: 500\n            });\n        }\n        // Fetch complete order with items\n        const { data: completeOrder, error: fetchError } = await _src_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.supabaseServer.from(\"orders\").select(`\n        *,\n        order_items (*)\n      `).eq(\"id\", orderData.id).single();\n        if (fetchError || !completeOrder) {\n            console.error(\"Error fetching complete order:\", fetchError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Order created but failed to fetch details\"\n            }, {\n                status: 500\n            });\n        }\n        // Format order\n        const completeOrderData = completeOrder;\n        const formattedOrder = {\n            id: completeOrderData.id,\n            order_number: completeOrderData.order_number,\n            customer_name: completeOrderData.customer_name,\n            contact_number: completeOrderData.contact_number,\n            service_type: completeOrderData.service_type,\n            address: completeOrderData.address,\n            landmark: completeOrderData.landmark,\n            pickup_time: completeOrderData.pickup_time,\n            party_size: completeOrderData.party_size,\n            dine_in_time: completeOrderData.dine_in_time,\n            payment_method: completeOrderData.payment_method,\n            reference_number: completeOrderData.reference_number,\n            status: completeOrderData.status,\n            total: Number(completeOrderData.total),\n            notes: completeOrderData.notes,\n            customer_ip: completeOrderData.customer_ip,\n            created_at: completeOrderData.created_at,\n            updated_at: completeOrderData.updated_at,\n            completed_at: completeOrderData.completed_at,\n            delivery_fee: completeOrderData.delivery_fee ? Number(completeOrderData.delivery_fee) : null,\n            lalamove_quotation_id: completeOrderData.lalamove_quotation_id,\n            lalamove_order_id: completeOrderData.lalamove_order_id,\n            lalamove_status: completeOrderData.lalamove_status,\n            lalamove_tracking_url: completeOrderData.lalamove_tracking_url,\n            order_items: completeOrderData.order_items?.map((item)=>({\n                    id: item.id,\n                    order_id: item.order_id,\n                    menu_item_id: item.menu_item_id,\n                    menu_item_name: item.menu_item_name,\n                    quantity: item.quantity,\n                    unit_price: Number(item.unit_price),\n                    total_price: Number(item.total_price),\n                    selected_variation: item.selected_variation,\n                    selected_add_ons: item.selected_add_ons,\n                    created_at: item.created_at\n                })) || []\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            order: formattedOrder\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Unexpected error in POST /api/orders:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUJBQXVCa0Qsa0JBQWtCbEQscUJBQXFCO1lBQzlEQyxhQUFhLGtCQUFtQkEsV0FBVyxFQUFZeEIsSUFBSSxDQUFDeUIsT0FBZTtvQkFDekV4QixJQUFJd0IsS0FBS3hCLEVBQUU7b0JBQ1h5QixVQUFVRCxLQUFLQyxRQUFRO29CQUN2QkMsY0FBY0YsS0FBS0UsWUFBWTtvQkFDL0JDLGdCQUFnQkgsS0FBS0csY0FBYztvQkFDbkNDLFVBQVVKLEtBQUtJLFFBQVE7b0JBQ3ZCQyxZQUFZakIsT0FBT1ksS0FBS0ssVUFBVTtvQkFDbENDLGFBQWFsQixPQUFPWSxLQUFLTSxXQUFXO29CQUNwQ0Msb0JBQW9CUCxLQUFLTyxrQkFBa0I7b0JBQzNDQyxrQkFBa0JSLEtBQUtRLGdCQUFnQjtvQkFDdkNqQixZQUFZUyxLQUFLVCxVQUFVO2dCQUM3QixPQUFPLEVBQUU7UUFDWDtRQUVBLE9BQU9wRCxrRkFBWUEsQ0FBQ2dDLElBQUksQ0FBQztZQUFFWCxPQUFPeUY7UUFBZSxHQUFHO1lBQUVyRyxRQUFRO1FBQUk7SUFDcEUsRUFBRSxPQUFPcUIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMseUNBQXlDQTtRQUN2RCxPQUFPOUIsa0ZBQVlBLENBQUNnQyxJQUFJLENBQ3RCO1lBQUVGLE9BQU87UUFBd0IsR0FDakM7WUFBRXJCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhcnJzLWZhbW91cy1zaGFrZXMvLi9hcHAvYXBpL29yZGVycy9yb3V0ZS50cz85ZmVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBzdXBhYmFzZVNlcnZlciwgZ2V0Q2xpZW50SVAgfSBmcm9tICcuLi8uLi8uLi9zcmMvbGliL3N1cGFiYXNlLXNlcnZlcic7XG5pbXBvcnQgdHlwZSB7IE9yZGVyLCBPcmRlckZpbHRlcnMsIE9yZGVyU3RhdHVzIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcblxuLyoqXG4gKiBHRVQgL2FwaS9vcmRlcnNcbiAqIEZldGNoIG9yZGVycyB3aXRoIG9wdGlvbmFsIGZpbHRlcnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXM7XG5cbiAgICAvLyBQYXJzZSBmaWx0ZXJzIGZyb20gcXVlcnkgcGFyYW1ldGVyc1xuICAgIGNvbnN0IGZpbHRlcnM6IE9yZGVyRmlsdGVycyA9IHt9O1xuICAgIGNvbnN0IHN0YXR1cyA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXR1cycpO1xuICAgIGNvbnN0IHNlcnZpY2VUeXBlID0gc2VhcmNoUGFyYW1zLmdldCgnc2VydmljZV90eXBlJyk7XG4gICAgY29uc3QgZGF0ZUZyb20gPSBzZWFyY2hQYXJhbXMuZ2V0KCdkYXRlX2Zyb20nKTtcbiAgICBjb25zdCBkYXRlVG8gPSBzZWFyY2hQYXJhbXMuZ2V0KCdkYXRlX3RvJyk7XG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJyk7XG5cbiAgICBpZiAoc3RhdHVzKSBmaWx0ZXJzLnN0YXR1cyA9IHN0YXR1cyBhcyBPcmRlclN0YXR1cztcbiAgICBpZiAoc2VydmljZVR5cGUpIGZpbHRlcnMuc2VydmljZV90eXBlID0gc2VydmljZVR5cGUgYXMgJ2RpbmUtaW4nIHwgJ3BpY2t1cCcgfCAnZGVsaXZlcnknO1xuICAgIGlmIChkYXRlRnJvbSkgZmlsdGVycy5kYXRlX2Zyb20gPSBkYXRlRnJvbTtcbiAgICBpZiAoZGF0ZVRvKSBmaWx0ZXJzLmRhdGVfdG8gPSBkYXRlVG87XG4gICAgaWYgKHNlYXJjaCkgZmlsdGVycy5zZWFyY2ggPSBzZWFyY2g7XG5cbiAgICAvLyBCdWlsZCBxdWVyeVxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlU2VydmVyXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICAqLFxuICAgICAgICBvcmRlcl9pdGVtcyAoKilcbiAgICAgIGApXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICAvLyBBcHBseSBmaWx0ZXJzXG4gICAgaWYgKGZpbHRlcnMuc3RhdHVzKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzdGF0dXMnLCBmaWx0ZXJzLnN0YXR1cyk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlcnMuc2VydmljZV90eXBlKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzZXJ2aWNlX3R5cGUnLCBmaWx0ZXJzLnNlcnZpY2VfdHlwZSk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlcnMuZGF0ZV9mcm9tKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnY3JlYXRlZF9hdCcsIGZpbHRlcnMuZGF0ZV9mcm9tKTtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy5kYXRlX3RvKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmx0ZSgnY3JlYXRlZF9hdCcsIGZpbHRlcnMuZGF0ZV90byk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlcnMuc2VhcmNoKSB7XG4gICAgICBjb25zdCBzZWFyY2hUZXJtID0gZmlsdGVycy5zZWFyY2gudG9Mb3dlckNhc2UoKTtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoYG9yZGVyX251bWJlci5pbGlrZS4lJHtzZWFyY2hUZXJtfSUsY3VzdG9tZXJfbmFtZS5pbGlrZS4lJHtzZWFyY2hUZXJtfSUsY29udGFjdF9udW1iZXIuaWxpa2UuJSR7c2VhcmNoVGVybX0lYCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG9yZGVyczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggb3JkZXJzJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IG9yZGVyc1xuICAgIGNvbnN0IG9yZGVyczogT3JkZXJbXSA9ICgoZGF0YSB8fCBbXSkgYXMgYW55W10pLm1hcCgob3JkZXI6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBvcmRlci5pZCxcbiAgICAgIG9yZGVyX251bWJlcjogb3JkZXIub3JkZXJfbnVtYmVyLFxuICAgICAgY3VzdG9tZXJfbmFtZTogb3JkZXIuY3VzdG9tZXJfbmFtZSxcbiAgICAgIGNvbnRhY3RfbnVtYmVyOiBvcmRlci5jb250YWN0X251bWJlcixcbiAgICAgIHNlcnZpY2VfdHlwZTogb3JkZXIuc2VydmljZV90eXBlIGFzICdkaW5lLWluJyB8ICdwaWNrdXAnIHwgJ2RlbGl2ZXJ5JyxcbiAgICAgIGFkZHJlc3M6IG9yZGVyLmFkZHJlc3MsXG4gICAgICBsYW5kbWFyazogb3JkZXIubGFuZG1hcmssXG4gICAgICBwaWNrdXBfdGltZTogb3JkZXIucGlja3VwX3RpbWUsXG4gICAgICBwYXJ0eV9zaXplOiBvcmRlci5wYXJ0eV9zaXplLFxuICAgICAgZGluZV9pbl90aW1lOiBvcmRlci5kaW5lX2luX3RpbWUsXG4gICAgICBwYXltZW50X21ldGhvZDogb3JkZXIucGF5bWVudF9tZXRob2QsXG4gICAgICByZWZlcmVuY2VfbnVtYmVyOiBvcmRlci5yZWZlcmVuY2VfbnVtYmVyLFxuICAgICAgc3RhdHVzOiBvcmRlci5zdGF0dXMgYXMgT3JkZXJTdGF0dXMsXG4gICAgICB0b3RhbDogTnVtYmVyKG9yZGVyLnRvdGFsKSxcbiAgICAgIG5vdGVzOiBvcmRlci5ub3RlcyxcbiAgICAgIGN1c3RvbWVyX2lwOiBvcmRlci5jdXN0b21lcl9pcCxcbiAgICAgIGNyZWF0ZWRfYXQ6IG9yZGVyLmNyZWF0ZWRfYXQsXG4gICAgICB1cGRhdGVkX2F0OiBvcmRlci51cGRhdGVkX2F0LFxuICAgICAgY29tcGxldGVkX2F0OiBvcmRlci5jb21wbGV0ZWRfYXQsXG4gICAgICBkZWxpdmVyeV9mZWU6IG9yZGVyLmRlbGl2ZXJ5X2ZlZSA/IE51bWJlcihvcmRlci5kZWxpdmVyeV9mZWUpIDogbnVsbCxcbiAgICAgIGxhbGFtb3ZlX3F1b3RhdGlvbl9pZDogb3JkZXIubGFsYW1vdmVfcXVvdGF0aW9uX2lkLFxuICAgICAgbGFsYW1vdmVfb3JkZXJfaWQ6IG9yZGVyLmxhbGFtb3ZlX29yZGVyX2lkLFxuICAgICAgbGFsYW1vdmVfc3RhdHVzOiBvcmRlci5sYWxhbW92ZV9zdGF0dXMsXG4gICAgICBsYWxhbW92ZV90cmFja2luZ191cmw6IG9yZGVyLmxhbGFtb3ZlX3RyYWNraW5nX3VybCxcbiAgICAgIG9yZGVyX2l0ZW1zOiAob3JkZXIub3JkZXJfaXRlbXMgYXMgYW55W10pPy5tYXAoKGl0ZW06IGFueSkgPT4gKHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIG9yZGVyX2lkOiBpdGVtLm9yZGVyX2lkLFxuICAgICAgICBtZW51X2l0ZW1faWQ6IGl0ZW0ubWVudV9pdGVtX2lkLFxuICAgICAgICBtZW51X2l0ZW1fbmFtZTogaXRlbS5tZW51X2l0ZW1fbmFtZSxcbiAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgIHVuaXRfcHJpY2U6IE51bWJlcihpdGVtLnVuaXRfcHJpY2UpLFxuICAgICAgICB0b3RhbF9wcmljZTogTnVtYmVyKGl0ZW0udG90YWxfcHJpY2UpLFxuICAgICAgICBzZWxlY3RlZF92YXJpYXRpb246IGl0ZW0uc2VsZWN0ZWRfdmFyaWF0aW9uLFxuICAgICAgICBzZWxlY3RlZF9hZGRfb25zOiBpdGVtLnNlbGVjdGVkX2FkZF9vbnMsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IGl0ZW0uY3JlYXRlZF9hdFxuICAgICAgfSkpIHx8IFtdLFxuICAgICAgYnJhbmNoX2lkOiBvcmRlci5icmFuY2hfaWRcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvcmRlcnMgfSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGluIEdFVCAvYXBpL29yZGVyczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBQT1NUIC9hcGkvb3JkZXJzXG4gKiBDcmVhdGUgYSBuZXcgb3JkZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgY2xpZW50SVAgPSBnZXRDbGllbnRJUChyZXF1ZXN0KTtcblxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IHtcbiAgICAgIGNhcnRJdGVtcyxcbiAgICAgIGN1c3RvbWVyTmFtZSxcbiAgICAgIGNvbnRhY3ROdW1iZXIsXG4gICAgICBzZXJ2aWNlVHlwZSxcbiAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICB0b3RhbCxcbiAgICAgIG9wdGlvbnNcbiAgICB9ID0gYm9keTtcblxuICAgIGlmICghY2FydEl0ZW1zIHx8ICFBcnJheS5pc0FycmF5KGNhcnRJdGVtcykgfHwgY2FydEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQ2FydCBpdGVtcyBhcmUgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIWN1c3RvbWVyTmFtZSB8fCAhY29udGFjdE51bWJlciB8fCAhc2VydmljZVR5cGUgfHwgIXBheW1lbnRNZXRob2QgfHwgdG90YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSYXRlIGxpbWl0aW5nIGRpc2FibGVkIC0gYWxsb3cgYWxsIG9yZGVyc1xuICAgIC8vIEdlbmVyYXRlIG9yZGVyIG51bWJlclxuICAgIGNvbnN0IHsgZGF0YTogb3JkZXJOdW1iZXIsIGVycm9yOiBvcmRlck51bWJlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVNlcnZlclxuICAgICAgLnJwYygnZ2VuZXJhdGVfb3JkZXJfbnVtYmVyJyk7XG5cbiAgICBpZiAob3JkZXJOdW1iZXJFcnJvciB8fCAhb3JkZXJOdW1iZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgb3JkZXIgbnVtYmVyOicsIG9yZGVyTnVtYmVyRXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIG9yZGVyIG51bWJlcicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBvcmRlclxuICAgIGNvbnN0IHsgZGF0YTogb3JkZXIsIGVycm9yOiBvcmRlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVNlcnZlclxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgb3JkZXJfbnVtYmVyOiBvcmRlck51bWJlcixcbiAgICAgICAgY3VzdG9tZXJfbmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgICBjb250YWN0X251bWJlcjogY29udGFjdE51bWJlcixcbiAgICAgICAgc2VydmljZV90eXBlOiBzZXJ2aWNlVHlwZSxcbiAgICAgICAgYWRkcmVzczogb3B0aW9ucz8uYWRkcmVzcyB8fCBudWxsLFxuICAgICAgICBsYW5kbWFyazogb3B0aW9ucz8ubGFuZG1hcmsgfHwgbnVsbCxcbiAgICAgICAgcGlja3VwX3RpbWU6IG9wdGlvbnM/LnBpY2t1cFRpbWUgfHwgbnVsbCxcbiAgICAgICAgcGFydHlfc2l6ZTogb3B0aW9ucz8ucGFydHlTaXplIHx8IG51bGwsXG4gICAgICAgIGRpbmVfaW5fdGltZTogb3B0aW9ucz8uZGluZUluVGltZSB8fCBudWxsLFxuICAgICAgICBwYXltZW50X21ldGhvZDogcGF5bWVudE1ldGhvZCxcbiAgICAgICAgcmVmZXJlbmNlX251bWJlcjogb3B0aW9ucz8ucmVmZXJlbmNlTnVtYmVyIHx8IG51bGwsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICB0b3RhbDogdG90YWwsXG4gICAgICAgIGRlbGl2ZXJ5X2ZlZTogb3B0aW9ucz8uZGVsaXZlcnlGZWUgPz8gbnVsbCxcbiAgICAgICAgbGFsYW1vdmVfcXVvdGF0aW9uX2lkOiBvcHRpb25zPy5sYWxhbW92ZVF1b3RhdGlvbklkIHx8IG51bGwsXG4gICAgICAgIGxhbGFtb3ZlX29yZGVyX2lkOiBudWxsLFxuICAgICAgICBsYWxhbW92ZV9zdGF0dXM6IG51bGwsXG4gICAgICAgIGxhbGFtb3ZlX3RyYWNraW5nX3VybDogbnVsbCxcbiAgICAgICAgbm90ZXM6IG9wdGlvbnM/Lm5vdGVzIHx8IG51bGwsXG4gICAgICAgIGN1c3RvbWVyX2lwOiBjbGllbnRJUCxcbiAgICAgICAgYnJhbmNoX2lkOiBvcHRpb25zPy5icmFuY2hJZCB8fCBudWxsXG4gICAgICB9IGFzIGFueSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKG9yZGVyRXJyb3IgfHwgIW9yZGVyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBvcmRlckVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgb3JkZXInLCBkZXRhaWxzOiBvcmRlckVycm9yPy5tZXNzYWdlIHx8ICdPcmRlciBjcmVhdGlvbiBmYWlsZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgb3JkZXIgaXRlbXNcbiAgICBjb25zdCBvcmRlckRhdGEgPSBvcmRlciBhcyBhbnk7XG4gICAgY29uc3Qgb3JkZXJJdGVtcyA9IGNhcnRJdGVtcy5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgLy8gRXh0cmFjdCBtZW51IGl0ZW0gSUQgZnJvbSBjYXJ0IGl0ZW0gSURcbiAgICAgIGxldCBtZW51SXRlbUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgIGlmIChpdGVtLmlkKSB7XG4gICAgICAgIGNvbnN0IHV1aWRNYXRjaCA9IGl0ZW0uaWQubWF0Y2goL14oWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17MTJ9KS9pKTtcbiAgICAgICAgaWYgKHV1aWRNYXRjaCAmJiB1dWlkTWF0Y2hbMV0pIHtcbiAgICAgICAgICBtZW51SXRlbUlkID0gdXVpZE1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9yZGVyX2lkOiBvcmRlckRhdGEuaWQsXG4gICAgICAgIG1lbnVfaXRlbV9pZDogbWVudUl0ZW1JZCxcbiAgICAgICAgbWVudV9pdGVtX25hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgIHVuaXRfcHJpY2U6IGl0ZW0udG90YWxQcmljZSxcbiAgICAgICAgdG90YWxfcHJpY2U6IGl0ZW0udG90YWxQcmljZSAqIGl0ZW0ucXVhbnRpdHksXG4gICAgICAgIHNlbGVjdGVkX3ZhcmlhdGlvbjogaXRlbS5zZWxlY3RlZFZhcmlhdGlvbiB8fCBudWxsLFxuICAgICAgICBzZWxlY3RlZF9hZGRfb25zOiBpdGVtLnNlbGVjdGVkQWRkT25zIHx8IG51bGxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCB7IGVycm9yOiBpdGVtc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVNlcnZlclxuICAgICAgLmZyb20oJ29yZGVyX2l0ZW1zJylcbiAgICAgIC5pbnNlcnQob3JkZXJJdGVtcyBhcyBhbnkpO1xuXG4gICAgaWYgKGl0ZW1zRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG9yZGVyIGl0ZW1zOicsIGl0ZW1zRXJyb3IpO1xuICAgICAgLy8gVHJ5IHRvIGRlbGV0ZSB0aGUgb3JkZXIgaWYgaXRlbXMgZmFpbFxuICAgICAgYXdhaXQgc3VwYWJhc2VTZXJ2ZXIuZnJvbSgnb3JkZXJzJykuZGVsZXRlKCkuZXEoJ2lkJywgb3JkZXJEYXRhLmlkKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgb3JkZXIgaXRlbXMnLCBkZXRhaWxzOiBpdGVtc0Vycm9yLm1lc3NhZ2UgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEZldGNoIGNvbXBsZXRlIG9yZGVyIHdpdGggaXRlbXNcbiAgICBjb25zdCB7IGRhdGE6IGNvbXBsZXRlT3JkZXIsIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVNlcnZlclxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgKixcbiAgICAgICAgb3JkZXJfaXRlbXMgKCopXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIG9yZGVyRGF0YS5pZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChmZXRjaEVycm9yIHx8ICFjb21wbGV0ZU9yZGVyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb21wbGV0ZSBvcmRlcjonLCBmZXRjaEVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ09yZGVyIGNyZWF0ZWQgYnV0IGZhaWxlZCB0byBmZXRjaCBkZXRhaWxzJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IG9yZGVyXG4gICAgY29uc3QgY29tcGxldGVPcmRlckRhdGEgPSBjb21wbGV0ZU9yZGVyIGFzIGFueTtcbiAgICBjb25zdCBmb3JtYXR0ZWRPcmRlcjogT3JkZXIgPSB7XG4gICAgICBpZDogY29tcGxldGVPcmRlckRhdGEuaWQsXG4gICAgICBvcmRlcl9udW1iZXI6IGNvbXBsZXRlT3JkZXJEYXRhLm9yZGVyX251bWJlcixcbiAgICAgIGN1c3RvbWVyX25hbWU6IGNvbXBsZXRlT3JkZXJEYXRhLmN1c3RvbWVyX25hbWUsXG4gICAgICBjb250YWN0X251bWJlcjogY29tcGxldGVPcmRlckRhdGEuY29udGFjdF9udW1iZXIsXG4gICAgICBzZXJ2aWNlX3R5cGU6IGNvbXBsZXRlT3JkZXJEYXRhLnNlcnZpY2VfdHlwZSBhcyAnZGluZS1pbicgfCAncGlja3VwJyB8ICdkZWxpdmVyeScsXG4gICAgICBhZGRyZXNzOiBjb21wbGV0ZU9yZGVyRGF0YS5hZGRyZXNzLFxuICAgICAgbGFuZG1hcms6IGNvbXBsZXRlT3JkZXJEYXRhLmxhbmRtYXJrLFxuICAgICAgcGlja3VwX3RpbWU6IGNvbXBsZXRlT3JkZXJEYXRhLnBpY2t1cF90aW1lLFxuICAgICAgcGFydHlfc2l6ZTogY29tcGxldGVPcmRlckRhdGEucGFydHlfc2l6ZSxcbiAgICAgIGRpbmVfaW5fdGltZTogY29tcGxldGVPcmRlckRhdGEuZGluZV9pbl90aW1lLFxuICAgICAgcGF5bWVudF9tZXRob2Q6IGNvbXBsZXRlT3JkZXJEYXRhLnBheW1lbnRfbWV0aG9kLFxuICAgICAgcmVmZXJlbmNlX251bWJlcjogY29tcGxldGVPcmRlckRhdGEucmVmZXJlbmNlX251bWJlcixcbiAgICAgIHN0YXR1czogY29tcGxldGVPcmRlckRhdGEuc3RhdHVzIGFzIE9yZGVyU3RhdHVzLFxuICAgICAgdG90YWw6IE51bWJlcihjb21wbGV0ZU9yZGVyRGF0YS50b3RhbCksXG4gICAgICBub3RlczogY29tcGxldGVPcmRlckRhdGEubm90ZXMsXG4gICAgICBjdXN0b21lcl9pcDogY29tcGxldGVPcmRlckRhdGEuY3VzdG9tZXJfaXAsXG4gICAgICBjcmVhdGVkX2F0OiBjb21wbGV0ZU9yZGVyRGF0YS5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogY29tcGxldGVPcmRlckRhdGEudXBkYXRlZF9hdCxcbiAgICAgIGNvbXBsZXRlZF9hdDogY29tcGxldGVPcmRlckRhdGEuY29tcGxldGVkX2F0LFxuICAgICAgZGVsaXZlcnlfZmVlOiBjb21wbGV0ZU9yZGVyRGF0YS5kZWxpdmVyeV9mZWUgPyBOdW1iZXIoY29tcGxldGVPcmRlckRhdGEuZGVsaXZlcnlfZmVlKSA6IG51bGwsXG4gICAgICBsYWxhbW92ZV9xdW90YXRpb25faWQ6IGNvbXBsZXRlT3JkZXJEYXRhLmxhbGFtb3ZlX3F1b3RhdGlvbl9pZCxcbiAgICAgIGxhbGFtb3ZlX29yZGVyX2lkOiBjb21wbGV0ZU9yZGVyRGF0YS5sYWxhbW92ZV9vcmRlcl9pZCxcbiAgICAgIGxhbGFtb3ZlX3N0YXR1czogY29tcGxldGVPcmRlckRhdGEubGFsYW1vdmVfc3RhdHVzLFxuICAgICAgbGFsYW1vdmVfdHJhY2tpbmdfdXJsOiBjb21wbGV0ZU9yZGVyRGF0YS5sYWxhbW92ZV90cmFja2luZ191cmwsXG4gICAgICBvcmRlcl9pdGVtczogKGNvbXBsZXRlT3JkZXJEYXRhLm9yZGVyX2l0ZW1zIGFzIGFueVtdKT8ubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICBvcmRlcl9pZDogaXRlbS5vcmRlcl9pZCxcbiAgICAgICAgbWVudV9pdGVtX2lkOiBpdGVtLm1lbnVfaXRlbV9pZCxcbiAgICAgICAgbWVudV9pdGVtX25hbWU6IGl0ZW0ubWVudV9pdGVtX25hbWUsXG4gICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5LFxuICAgICAgICB1bml0X3ByaWNlOiBOdW1iZXIoaXRlbS51bml0X3ByaWNlKSxcbiAgICAgICAgdG90YWxfcHJpY2U6IE51bWJlcihpdGVtLnRvdGFsX3ByaWNlKSxcbiAgICAgICAgc2VsZWN0ZWRfdmFyaWF0aW9uOiBpdGVtLnNlbGVjdGVkX3ZhcmlhdGlvbixcbiAgICAgICAgc2VsZWN0ZWRfYWRkX29uczogaXRlbS5zZWxlY3RlZF9hZGRfb25zLFxuICAgICAgICBjcmVhdGVkX2F0OiBpdGVtLmNyZWF0ZWRfYXRcbiAgICAgIH0pKSB8fCBbXVxuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBvcmRlcjogZm9ybWF0dGVkT3JkZXIgfSwgeyBzdGF0dXM6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGluIFBPU1QgL2FwaS9vcmRlcnM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdXBhYmFzZVNlcnZlciIsImdldENsaWVudElQIiwicnVudGltZSIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJuZXh0VXJsIiwiZmlsdGVycyIsInN0YXR1cyIsImdldCIsInNlcnZpY2VUeXBlIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJzZWFyY2giLCJzZXJ2aWNlX3R5cGUiLCJkYXRlX2Zyb20iLCJkYXRlX3RvIiwicXVlcnkiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJlcSIsImd0ZSIsImx0ZSIsInNlYXJjaFRlcm0iLCJ0b0xvd2VyQ2FzZSIsIm9yIiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImpzb24iLCJkZXRhaWxzIiwibWVzc2FnZSIsIm9yZGVycyIsIm1hcCIsImlkIiwib3JkZXJfbnVtYmVyIiwiY3VzdG9tZXJfbmFtZSIsImNvbnRhY3RfbnVtYmVyIiwiYWRkcmVzcyIsImxhbmRtYXJrIiwicGlja3VwX3RpbWUiLCJwYXJ0eV9zaXplIiwiZGluZV9pbl90aW1lIiwicGF5bWVudF9tZXRob2QiLCJyZWZlcmVuY2VfbnVtYmVyIiwidG90YWwiLCJOdW1iZXIiLCJub3RlcyIsImN1c3RvbWVyX2lwIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJjb21wbGV0ZWRfYXQiLCJkZWxpdmVyeV9mZWUiLCJsYWxhbW92ZV9xdW90YXRpb25faWQiLCJsYWxhbW92ZV9vcmRlcl9pZCIsImxhbGFtb3ZlX3N0YXR1cyIsImxhbGFtb3ZlX3RyYWNraW5nX3VybCIsIm9yZGVyX2l0ZW1zIiwiaXRlbSIsIm9yZGVyX2lkIiwibWVudV9pdGVtX2lkIiwibWVudV9pdGVtX25hbWUiLCJxdWFudGl0eSIsInVuaXRfcHJpY2UiLCJ0b3RhbF9wcmljZSIsInNlbGVjdGVkX3ZhcmlhdGlvbiIsInNlbGVjdGVkX2FkZF9vbnMiLCJicmFuY2hfaWQiLCJQT1NUIiwiYm9keSIsImNsaWVudElQIiwiY2FydEl0ZW1zIiwiY3VzdG9tZXJOYW1lIiwiY29udGFjdE51bWJlciIsInBheW1lbnRNZXRob2QiLCJvcHRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidW5kZWZpbmVkIiwib3JkZXJOdW1iZXIiLCJvcmRlck51bWJlckVycm9yIiwicnBjIiwib3JkZXJFcnJvciIsImluc2VydCIsInBpY2t1cFRpbWUiLCJwYXJ0eVNpemUiLCJkaW5lSW5UaW1lIiwicmVmZXJlbmNlTnVtYmVyIiwiZGVsaXZlcnlGZWUiLCJsYWxhbW92ZVF1b3RhdGlvbklkIiwiYnJhbmNoSWQiLCJzaW5nbGUiLCJvcmRlckRhdGEiLCJvcmRlckl0ZW1zIiwibWVudUl0ZW1JZCIsInV1aWRNYXRjaCIsIm1hdGNoIiwibmFtZSIsInRvdGFsUHJpY2UiLCJzZWxlY3RlZFZhcmlhdGlvbiIsInNlbGVjdGVkQWRkT25zIiwiaXRlbXNFcnJvciIsImRlbGV0ZSIsImNvbXBsZXRlT3JkZXIiLCJmZXRjaEVycm9yIiwiY29tcGxldGVPcmRlckRhdGEiLCJmb3JtYXR0ZWRPcmRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase-server.ts":
/*!************************************!*\
  !*** ./src/lib/supabase-server.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientIP: () => (/* binding */ getClientIP),\n/* harmony export */   isAdminRequest: () => (/* binding */ isAdminRequest),\n/* harmony export */   supabaseServer: () => (/* binding */ supabaseServer)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/main/index.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://inwazthpsqmjdgqihxuq.supabase.co\";\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL\");\n}\nif (!supabaseServiceRoleKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY\");\n}\n/**\n * Server-side Supabase client with service role key\n * This bypasses RLS and should only be used in API routes\n */ const supabaseServer = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRoleKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n/**\n * Get client IP from request headers\n */ function getClientIP(request) {\n    const forwarded = request.headers.get(\"x-forwarded-for\");\n    const realIP = request.headers.get(\"x-real-ip\");\n    if (forwarded) {\n        return forwarded.split(\",\")[0].trim();\n    }\n    if (realIP) {\n        return realIP;\n    }\n    // Fallback for development\n    return \"127.0.0.1\";\n}\n/**\n * Admin password (should match client-side)\n */ const ADMIN_PASSWORD = \"Starrs@Admin!2025\";\n/**\n * Generate admin auth token from password\n * Simple hash for verification\n */ function generateAdminToken() {\n    // Simple token generation - in production, use a more secure method\n    // For now, using a base64-like encoding of the password\n    return Buffer.from(ADMIN_PASSWORD).toString(\"base64\");\n}\n/**\n * Check if a request is from an authenticated admin\n * Verifies the X-Admin-Auth header matches the admin token\n */ function isAdminRequest(request) {\n    const adminAuthHeader = request.headers.get(\"x-admin-auth\");\n    if (!adminAuthHeader) {\n        return false;\n    }\n    // Verify the token matches\n    const expectedToken = generateAdminToken();\n    return adminAuthHeader === expectedToken;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLXNlcnZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxRDtBQUdyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcseUJBQXlCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUVwRSxJQUFJLENBQUNMLGFBQWE7SUFDaEIsTUFBTSxJQUFJTSxNQUFNO0FBQ2xCO0FBRUEsSUFBSSxDQUFDRix3QkFBd0I7SUFDM0IsTUFBTSxJQUFJRSxNQUFNO0FBQ2xCO0FBRUE7OztDQUdDLEdBQ00sTUFBTUMsaUJBQWlCUixtRUFBWUEsQ0FDeENDLGFBQ0FJLHdCQUNBO0lBQ0VJLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNBO0FBRUY7O0NBRUMsR0FDTSxTQUFTQyxZQUFZQyxPQUFnQjtJQUMxQyxNQUFNQyxZQUFZRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUN0QyxNQUFNQyxTQUFTSixRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUVuQyxJQUFJRixXQUFXO1FBQ2IsT0FBT0EsVUFBVUksS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUNDLElBQUk7SUFDckM7SUFFQSxJQUFJRixRQUFRO1FBQ1YsT0FBT0E7SUFDVDtJQUVBLDJCQUEyQjtJQUMzQixPQUFPO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNELE1BQU1HLGlCQUFpQjtBQUV2Qjs7O0NBR0MsR0FDRCxTQUFTQztJQUNQLG9FQUFvRTtJQUNwRSx3REFBd0Q7SUFDeEQsT0FBT0MsT0FBT0MsSUFBSSxDQUFDSCxnQkFBZ0JJLFFBQVEsQ0FBQztBQUM5QztBQUVBOzs7Q0FHQyxHQUNNLFNBQVNDLGVBQWVaLE9BQWdCO0lBQzdDLE1BQU1hLGtCQUFrQmIsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFFNUMsSUFBSSxDQUFDVSxpQkFBaUI7UUFDcEIsT0FBTztJQUNUO0lBRUEsMkJBQTJCO0lBQzNCLE1BQU1DLGdCQUFnQk47SUFDdEIsT0FBT0ssb0JBQW9CQztBQUM3QiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0YXJycy1mYW1vdXMtc2hha2VzLy4vc3JjL2xpYi9zdXBhYmFzZS1zZXJ2ZXIudHM/OGNmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHR5cGUgeyBEYXRhYmFzZSB9IGZyb20gJy4vc3VwYWJhc2UnO1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbmNvbnN0IHN1cGFiYXNlU2VydmljZVJvbGVLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuXG5pZiAoIXN1cGFiYXNlVXJsKSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwnKTtcbn1cblxuaWYgKCFzdXBhYmFzZVNlcnZpY2VSb2xlS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJyk7XG59XG5cbi8qKlxuICogU2VydmVyLXNpZGUgU3VwYWJhc2UgY2xpZW50IHdpdGggc2VydmljZSByb2xlIGtleVxuICogVGhpcyBieXBhc3NlcyBSTFMgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gQVBJIHJvdXRlc1xuICovXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VTZXJ2ZXIgPSBjcmVhdGVDbGllbnQ8RGF0YWJhc2U+KFxuICBzdXBhYmFzZVVybCxcbiAgc3VwYWJhc2VTZXJ2aWNlUm9sZUtleSxcbiAge1xuICAgIGF1dGg6IHtcbiAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gICAgfVxuICB9XG4pO1xuXG4vKipcbiAqIEdldCBjbGllbnQgSVAgZnJvbSByZXF1ZXN0IGhlYWRlcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsaWVudElQKHJlcXVlc3Q6IFJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcbiAgY29uc3QgcmVhbElQID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZWFsLWlwJyk7XG4gIFxuICBpZiAoZm9yd2FyZGVkKSB7XG4gICAgcmV0dXJuIGZvcndhcmRlZC5zcGxpdCgnLCcpWzBdLnRyaW0oKTtcbiAgfVxuICBcbiAgaWYgKHJlYWxJUCkge1xuICAgIHJldHVybiByZWFsSVA7XG4gIH1cbiAgXG4gIC8vIEZhbGxiYWNrIGZvciBkZXZlbG9wbWVudFxuICByZXR1cm4gJzEyNy4wLjAuMSc7XG59XG5cbi8qKlxuICogQWRtaW4gcGFzc3dvcmQgKHNob3VsZCBtYXRjaCBjbGllbnQtc2lkZSlcbiAqL1xuY29uc3QgQURNSU5fUEFTU1dPUkQgPSAnU3RhcnJzQEFkbWluITIwMjUnO1xuXG4vKipcbiAqIEdlbmVyYXRlIGFkbWluIGF1dGggdG9rZW4gZnJvbSBwYXNzd29yZFxuICogU2ltcGxlIGhhc2ggZm9yIHZlcmlmaWNhdGlvblxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUFkbWluVG9rZW4oKTogc3RyaW5nIHtcbiAgLy8gU2ltcGxlIHRva2VuIGdlbmVyYXRpb24gLSBpbiBwcm9kdWN0aW9uLCB1c2UgYSBtb3JlIHNlY3VyZSBtZXRob2RcbiAgLy8gRm9yIG5vdywgdXNpbmcgYSBiYXNlNjQtbGlrZSBlbmNvZGluZyBvZiB0aGUgcGFzc3dvcmRcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKEFETUlOX1BBU1NXT1JEKS50b1N0cmluZygnYmFzZTY0Jyk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSByZXF1ZXN0IGlzIGZyb20gYW4gYXV0aGVudGljYXRlZCBhZG1pblxuICogVmVyaWZpZXMgdGhlIFgtQWRtaW4tQXV0aCBoZWFkZXIgbWF0Y2hlcyB0aGUgYWRtaW4gdG9rZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWRtaW5SZXF1ZXN0KHJlcXVlc3Q6IFJlcXVlc3QpOiBib29sZWFuIHtcbiAgY29uc3QgYWRtaW5BdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1hZG1pbi1hdXRoJyk7XG4gIFxuICBpZiAoIWFkbWluQXV0aEhlYWRlcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgLy8gVmVyaWZ5IHRoZSB0b2tlbiBtYXRjaGVzXG4gIGNvbnN0IGV4cGVjdGVkVG9rZW4gPSBnZW5lcmF0ZUFkbWluVG9rZW4oKTtcbiAgcmV0dXJuIGFkbWluQXV0aEhlYWRlciA9PT0gZXhwZWN0ZWRUb2tlbjtcbn1cblxuXG5cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VSb2xlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VTZXJ2ZXIiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZ2V0Q2xpZW50SVAiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsInJlYWxJUCIsInNwbGl0IiwidHJpbSIsIkFETUlOX1BBU1NXT1JEIiwiZ2VuZXJhdGVBZG1pblRva2VuIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiaXNBZG1pblJlcXVlc3QiLCJhZG1pbkF1dGhIZWFkZXIiLCJleHBlY3RlZFRva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase-server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcodemedavid%2FDocuments%2Fstarrs%2FStarr-s-Famous-Shakes&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();